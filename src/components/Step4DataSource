import React, { useState } from "react";

const Step4DataSource = ({ streamId, onCreateTable }) => {
  const [dataSourceType, setDataSourceType] = useState("");
  const [path, setPath] = useState("");

  const handleDataSourceChange = (e) => {
    setDataSourceType(e.target.value);
    setPath("");  // Clear the path when the data source changes
  };

  const handlePathChange = (e) => {
    setPath(e.target.value);
  };

  const handleCreateTable = () => {
    if (dataSourceType && path) {
      const tableData = {
        streamId: streamId,
        dataSource: dataSourceType,
        path: path,
      };
      onCreateTable(tableData);  // Pass the data to the parent component
    } else {
      alert("Please select a data source and provide the path.");
    }
  };

  return (
    <div
      style={{
        height: "100vh",
        width: "100vw",
        display: "flex",
        justifyContent: "center",
        alignItems: "center",
        backgroundColor: "#f8f9fa",
        position: "relative",
      }}
    >
      {/* Step Progress Bar */}
      <div className="position-absolute top-0 start-0 w-100 p-3 bg-white shadow-sm">
        <div className="d-flex justify-content-center gap-4">
          <span className="text-muted">Step 1</span>
          <span className="text-muted">Step 2</span>
          <span className="text-muted">Step 3</span>
          <span className="fw-bold text-primary">Step 4</span>
        </div>
      </div>

      {/* Data Source Selection Card */}
      <div className="bg-white p-4 rounded shadow" style={{ width: "90%", maxWidth: "900px", maxHeight: "90vh", overflowY: "auto" }}>
        <h2 className="text-primary mb-4 text-center">Step 4: Select Data Source</h2>

        {/* Data Source Selection */}
        <div className="mb-3">
          <label className="form-label">Data Source Type:</label>
          <select value={dataSourceType} onChange={handleDataSourceChange} className="form-select">
            <option value="">Select Data Source</option>
            <option value="url">URL</option>
            <option value="folder">Folder</option>
          </select>
        </div>

        {/* Path Input */}
        <div className="mb-3">
          <label className="form-label">Path:</label>
          <input
            type="text"
            className="form-control"
            value={path}
            onChange={handlePathChange}
            placeholder="Enter URL or Folder Path"
          />
        </div>

        {/* Create Table Button */}
        <div className="d-flex justify-content-between mt-4">
          <button className="btn btn-primary" onClick={handleCreateTable}>Create Table</button>
        </div>
      </div>
    </div>
  );
};

export default Step4DataSource;
